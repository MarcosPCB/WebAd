<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AdDWeb Template</title>
    <!-- Bootstrap -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    
    <link href="../style.css" rel="stylesheet">
      
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@700&display=swap" rel="stylesheet">
  </head>

<body id="BODY">
    <div class="bg-white" id="WHITE-TRANSITION" style="height: 0%; width: 100%; position: absolute; z-index: 1000; -webkit-transition: height 1s ease-in-out; -webkit-transition-delay: 2s; transition: height 1s; transition-timing-function: ease-in-out; transition-delay: 2s"> </div>
    <div class="container-fluid" id="CT1">
        <div class="row justify-content-center align-items-center bg-color1" id="T1" style="min-height: 100vh">
            <div class="col-10" id="TE">
            </div>
        </div>
        
        <div class="row align-items-center bg-white" style="opacity: 1.0; -webkit-transition: opacity 1s; transition: opacity 1s; display: none;" id="T2">
            <div class="col-12 d-flex flex-wrap justify-content-center align-items-center" style="height: 100vh">
                <video style="max-width: 100vw; max-height: 100vh;" class="img-fluid" id="LOGO" muted></video>
            </div>
        </div>
    </div>
    <div class="container-fluid" style="opacity: 0.0; -webkit-transition: opacity 0.5s; transition: opacity 0.5s; display: none;" id="T3">
        <div class="row justify-content-center" >
            <div class="col-12 " id="IMG01" style="padding-right: 0; padding-left: 0; margin-top: -500px; -webkit-transition: all 1s ease-out; -webkit-transition-delay: 0.5s; transition: all 1s; transition-timing-function: ease-out; transition-delay: 0.5s;">
                <div id="SELO" style="display: flex; position: absolute; z-index: 15; max-width: 10vw; max-height: 10vh; margin-left: 10px; margin-top: 10px;">
                </div>
                <div id="IMGCAR" class="carousel slide" data-interval="3000" data-wrap="false">
                    <ol id="IMGCAR_SEL" class="carousel-indicators indicator-circle">
                      </ol>
                    <div class="carousel-inner" id="IMGCAR_IMGS">
                    </div>
                </div>
            </div>
            
            <div class="col-12 bg-white" style="height: 0vh; -webkit-transition: height 0.5s ease-out; -webkit-transition-delay: 0.9s; transition: height 0.5s ease-out; transition-delay: 0.9s;" id="WHITEBAR">
                <div id="LOGOCAR" class="carousel slide" data-interval="6000" data-wrap="true">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <div class="d-flex flex-wrap justify-content-center align-items-center" style="height: 10vh;">
                                <img class="img-fluid" id="LOGOPIC" style="height: 0%; -webkit-transition: height 0.5s ease-in-out; -webkit-transition-delay: 1.5s; transition: height 0.5s ease-in-out; transition-delay: 1.5s;" alt="Logo do produto">
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="d-flex flex-wrap justify-content-center align-items-center text-center" style="width: 100vw; height: 10vh;">
                                <h7 class="text-center font-weight-bold" style="font-family: montserrat">FALE COMIGO E SAIBA MAIS</h7>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
            
            <div class="col-11 mt-3">
                <div  id="TXTCAR" class="carousel slide" data-interval="6000" data-wrap="false">
                    <ol id="TXTCAR_SEL" class="carousel-indicators" style="bottom: -35px;">
                    </ol>
                    <div class="carousel-inner" id="TXTCAR_TXTS">
                       
                    </div>
                </div>
            </div>
            <div class="col-12 d-flex flex-wrap justify-content-center align-self-end mb-3 mt-5">
                <img src="../_assets/HM.png" style=" align-self: flex-start; width: auto; min-width: 80px; max-width: 10vh; height: auto;" class="img-fluid" alt="HM">
            </div>
        </div>
        
    </div>
    
   <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
        //Captura os parametros  no link
        var params = new URLSearchParams(window.location.search);
        var folder = "";
        
        if(params.get('p') != null)
            var folder = '../_assets/' + params.get('p') + '/';
        
        if(params.get('ad') != null)
            var ad = folder + params.get('ad') + '.txt';
        
        var jsn = { }, loaded = false;
        
        //Captura o parametro JSON
        if(params.get('json') != null)
        {
            jsn = JSON.parse(decodeURIComponent(atob(params.get('json'))));
            loaded = true;
        }
        
        $.ajaxSetup({ async:false }); //Faz a função acontecer na hora
        
        if(typeof ad != 'undefined' &&  folder != "")
        {
            $.getJSON(ad, function(d)
            { 
                jsn = d;
                loaded = true;
            });
        }
        
        $.ajaxSetup({ async:true }); //Volta ao normal
       
        //function PlayFrame()
        //{
        //Aqui começa a montagem da pagina, mesmo esquema do PHP, porém, em JS
            if(loaded == true)
            {
                $('#TE').next().remove();

                $('head').append('<link href="' + folder + 'estilo.css" rel="stylesheet">');

                for(var i = 1; i <= jsn['texto_entrada']['linhas']; i++)
                {
                    switch(i)
                    {
                        case 1:
                            $('#TE').append('<h4 ' + (i == jsn['texto_entrada']['linhas'] ? 'id="TEXT" class="text-center basefont text-color1 text-animation-1' : 'class="text-center basefont text-color1 text-animation-1') + '">' + jsn['texto_entrada']['linha_' + i] + '</h4>');
                            break;

                        case 2:
                            $('#TE').append('<h4 ' + (i == jsn['texto_entrada']['linhas'] ? 'id="TEXT" class="text-center basefont text-color1 text-animation-1' : 'class="text-center basefont text-color1 text-animation-1') + ' anim-delay-03">' + jsn['texto_entrada']['linha_' + i] + '</h4>');
                            break;

                        case 3:
                            $('#TE').append('<h4 ' + (i == jsn['texto_entrada']['linhas'] ? 'id="TEXT" class="text-center basefont text-color1 text-animation-1' : 'class="text-center basefont text-color1 text-animation-1') + ' anim-delay-05">' + jsn['texto_entrada']['linha_' + i] + '</h4>');
                            break;

                        case 4:
                            $('#TE').append('<h4 ' + (i == jsn['texto_entrada']['linhas'] ? 'id="TEXT" class="text-center basefont text-color1 text-animation-1' : 'class="text-center basefont text-color1 text-animation-1') + ' anim-delay-07">' + jsn['texto_entrada']['linha_' + i] + '</h4>');
                            break;
                    }
                }

                $('#LOGO').attr('src', folder + 'Logo.mp4');
                $('#LOGOPIC').attr('src', folder + 'Logo.png');

                if(typeof jsn['selo'] != 'undefined')
                    $('#SELO').append('<img class="img-fluid w-100" style="align-self: flex-start;" src="' + '../_assets/_selos/' + jsn['selo'] + '.png" alt="Selo">');
                
                for(i = 1; i <= jsn['imagens']['imagens']; i++)
                {
                    if(i == 1)
                    {
                        $('#IMGCAR_SEL').append('<li data-target="#IMGCAR" data-slide-to="0" class="active"></li>');
                        
                        $('#IMGCAR_IMGS').append('<div class="carousel-item active"><div class="d-flex flex-wrap justify-content-center"><img class="img-fluid" style="align-self: flex-start; max-height: 600px; width: auto;" src="' + folder + jsn['imagens']['imagem_' + i] + '.jpg' + '" alt="Imagem' + i + ' do empreendimento"></div></div>');
                    }
                    else
                    {
                        $('#IMGCAR_SEL').append('<li data-target="#IMGCAR" data-slide-to="' + (i - 1) + '"></li>');
                        
                        $('#IMGCAR_IMGS').append('<div class="carousel-item"><div class="d-flex flex-wrap justify-content-center"><img class="img-fluid" style="align-self: flex-start; max-height: 600px; width: auto;" src="' + folder + jsn['imagens']['imagem_' + i] + '.jpg' + '" alt="Imagem' + i + ' do empreendimento"></div></div>');
                    }
                }
                
                var delays = [ 'anim-delay-10', 'anim-delay-12', 'anim-delay-14', 'anim-delay-16' ];
                
                for(i = 1; i <= jsn['informacoes']['numero']; i++)
                {
                    if(i == 1)
                    {
                        $('#TXTCAR_SEL').append('<li data-target="#TXTCAR" data-slide-to="0" class="active"></li>');
                        
                        switch(jsn['informacoes']['info_1']['tipo'])
                        {
                            case 'lista':
                                $('#TXTCAR_TXTS').append('<div class="carousel-item active"><ul id="TC_T1" class="text-center text-color1 list-group text-animation-1 anim-delay-10 anim-duration-03" style="height: 13em"></ul></div>');
                                
                                for(var j = 1; j <= jsn['informacoes']['info_1']['linhas']; j++)
                                {
                                    $('#TC_T1').append('<li class="list-group-item text-animation-1 anim-duration-05 ' + delays[j - 1] + ' bg-color2 text-white">' + jsn['informacoes']['info_1']['linha_' + j] + '</li>');
                                }
                                
                                break;
                                
                            case 'paragrafo':
                                $('#TXTCAR_TXTS').append('<div class="text-center" style="height: 13em"><h4 class="text-color1 basefont font-weight-bold">' + jsn['informacoes']['info_1']['titulo'] + '</h4><p class="text-white">' + jsn['informacoes']['info_1']['texto'] + '</p></div>');
                                break;
                                
                            case 'imagem':
                                $('#TXTCAR_TXTS').append('<div class="carousel-item"><div class="d-flex flex-wrap justify-content-center align-content-center" style="height: 13em"><img class="img-fluid" src="' + '../_assets/_selos/' + jsn['informacoes']['info_1']['imagem'] + '.png' + '" style="align-self: flex-start; width:auto; height:100%;"></div></div>')
                                break;
                        }
                    }
                    else
                    {
                        $('#TXTCAR_SEL').append('<li data-target="#TXTCAR" data-slide-to="' + (i - 1) + '"></li>');
                        
                        switch(jsn['informacoes']['info_' + i]['tipo'])
                        {
                            case 'lista':
                                $('#TXTCAR_TXTS').append('<div class="carousel-item"><ul class="text-center text-color1 list-group text-animation-1 anim-delay-10 anim-duration-03" style="height: 13em" id="TC_T' + i + '"></ul></div>');
                                
                                for(var j = 1; j <= jsn['informacoes']['info_' + i]['linhas']; j++)
                                    $('#TC_T' + i).append('<li class="list-group-item text-animation-1 anim-duration-05 ' + delays[j - 1] + ' bg-color2 text-white">' + jsn['informacoes']['info_' + i]['linha_' + j] + '</li>');
                                break;
                                
                            case 'paragrafo':
                                $('#TXTCAR_TXTS').append('<div class="carousel-item"><div class="text-center" style="height: 13em"><h4 class="text-color1 basefont font-weight-bold">' + jsn['informacoes']['info_' + i]['titulo'] + '</h4><p class="text-white">' + jsn['informacoes']['info_' + i]['texto'] + '</p></div></div>');
                                break;
                                
                            case 'imagem':
                                $('#TXTCAR_TXTS').append('<div class="carousel-item"><div class="d-flex flex-wrap justify-content-center align-content-center" style="height: 13em"><img class="img-fluid" src="' + '../_assets/_selos/' + jsn['informacoes']['info_' + i]['imagem'] + '.png' + '" style="align-self: flex-start; width:auto; height:100%;"></div></div>')
                                break;
                        }
                    }
                }

            }
        //}
        
        //Aqui é o sistema de animação pra página
        
        let video = document.getElementById('LOGO');
        var tick = video.currentTime;
        
        $('#TEXT').on('animationend', function()
        {
            $('#WHITE-TRANSITION').css('height', '100%');
        });
        
        $('#WHITE-TRANSITION').on('transitionend', function()
        {
            $('#T2').show();
            $('#WHITE-TRANSITION').hide();
            $('#T1').hide();
            $('#BG1').hide();
            video.play();
        })
        
        video.addEventListener('timeupdate', function(e)
        {
            tick++;
            if(tick == 10)
                $('#T2').css('opacity', '0.0');
              
        });
        
        $('#T2').on('transitionend', function()
        {
            $('#T2').hide();
            $('#CT1').hide();
            $('#T3').show();
            $('#BODY').addClass('bg-color1');
            $('#T3').css('opacity', '1.0');
            $('#IMG01').css('margin-top', '0px');
            $('#WHITEBAR').css('height', '10vh');
            $('#LOGOPIC').css('height', '70%');
            
            $('#IMGCAR').carousel('cycle');

            $('#TXTCAR').carousel('cycle');
            
            $('#LOGOCAR').carousel('cycle');
        });
        
    </script>
</body>
</html>
